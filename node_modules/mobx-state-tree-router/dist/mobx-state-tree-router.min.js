!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mobx"),require("mobx-state-tree"),require("react"),require("mobx-react")):"function"==typeof define&&define.amd?define(["exports","mobx","mobx-state-tree","react","mobx-react"],t):t((e=e||self).mobxStateTreeRouter={},e.mobx,e.mobxStateTree,e.React,e.mobxReact)}(this,function(e,o,p,a,t){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a;var r=function(e){if(Array.isArray(e))return e};var n=function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r};var i=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var u=function(e,t){return r(e)||n(e,t)||i()},h=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},c=x,s=y,f=function(e,t){return g(y(e,t))},l=g,d=b,O=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function y(e,t){for(var r,n,o=[],i=0,a=0,u="",c=t&&t.delimiter||"/";null!=(r=O.exec(e));){var s=r[0],f=r[1],l=r.index;if(u+=e.slice(a,l),a=l+s.length,f)u+=f[1];else{var p=e[a],h=r[2],d=r[3],y=r[4],v=r[5],g=r[6],m=r[7];u&&(o.push(u),u="");var w=null!=h&&null!=p&&p!==h,b="+"===g||"*"===g,x="?"===g||"*"===g,E=r[2]||c,k=y||v;o.push({name:d||i++,prefix:h||"",delimiter:E,optional:x,repeat:b,partial:w,asterisk:!!m,pattern:k?(n=k,n.replace(/([=!:$\/()])/g,"\\$1")):m?".*":"[^"+S(E)+"]+?"})}}return a<e.length&&(u+=e.substr(a)),u&&o.push(u),o}function v(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function g(f){for(var l=new Array(f.length),e=0;e<f.length;e++)"object"==typeof f[e]&&(l[e]=new RegExp("^(?:"+f[e].pattern+")$"));return function(e,t){for(var r="",n=e||{},o=(t||{}).pretty?v:encodeURIComponent,i=0;i<f.length;i++){var a=f[i];if("string"!=typeof a){var u,c=n[a.name];if(null==c){if(a.optional){a.partial&&(r+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(h(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var s=0;s<c.length;s++){if(u=o(c[s]),!l[i].test(u))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===s?a.prefix:a.delimiter)+u}}else{if(u=a.asterisk?encodeURI(c).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):o(c),!l[i].test(u))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+u+'"');r+=a.prefix+u}}else r+=a}return r}}function S(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function m(e,t){return e.keys=t,e}function w(e){return e.sensitive?"":"i"}function b(e,t,r){h(t)||(r=t||r,t=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,i="",a=0;a<e.length;a++){var u=e[a];if("string"==typeof u)i+=S(u);else{var c=S(u.prefix),s="(?:"+u.pattern+")";t.push(u),u.repeat&&(s+="(?:"+c+s+")*"),i+=s=u.optional?u.partial?c+"("+s+")?":"(?:"+c+"("+s+"))?":c+"("+s+")"}}var f=S(r.delimiter||"/"),l=i.slice(-f.length)===f;return n||(i=(l?i.slice(0,-f.length):i)+"(?:"+f+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+f+"|$)",m(new RegExp("^"+i,w(r)),t)}function x(e,t,r){return h(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return m(e,t)}(e,t):h(e)?function(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(x(e[o],t,r).source);return m(new RegExp("(?:"+n.join("|")+")",w(r)),t)}(e,t,r):function(e,t,r){return b(y(e,r),t,r)}(e,t,r)}function E(e,t){return e(t={exports:{}},t.exports),t.exports}function k(e){return e&&e.default||e}c.parse=s,c.compile=f,c.tokensToFunction=l,c.tokensToRegExp=d;var N,L,j,R=k(Object.freeze({default:{100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}})),P=T;function T(e){if("number"==typeof e){if(!T[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!T[t])throw new Error("invalid status code: "+t);return t}if(!(t=T[e.toLowerCase()]))throw new Error('invalid status message: "'+e+'"');return t}T.STATUS_CODES=R,T.codes=(N=T,L=R,j=[],Object.keys(L).forEach(function(e){var t=L[e],r=Number(e);N[r]=t,N[t]=r,N[t.toLowerCase()]=r,j.push(r)}),j),T.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},T.empty={204:!0,205:!0,304:!0},T.retry={502:!0,503:!0,504:!0},global.setTimeout,global.clearTimeout;var A=global.performance||{},_=(A.now||A.mozNow||A.msNow||A.oNow||A.webkitNow,"function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}),U=/%[sdj%]/g;function C(e){if(!K(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(F(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(e).replace(U,function(e){if("%%"===e)return"%";if(o<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])Y(a)||!te(a)?i+=" "+a:i+=" "+F(a);return i}function z(e,t){if(X(global.process))return function(){return z(e,t).apply(this,arguments)};var r=!1;return function(){return r||(console.error(t),r=!0),e.apply(this,arguments)}}var V,I={};function D(t){if(X(V)&&(V=""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(V)){I[t]=function(){var e=C.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else I[t]=function(){};return I[t]}function F(e,t){var r={seen:[],stylize:H};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),J(t)?r.showHidden=t:t&&le(r,t),X(r.showHidden)&&(r.showHidden=!1),X(r.depth)&&(r.depth=2),X(r.colors)&&(r.colors=!1),X(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=M),q(r,e,r.depth)}function M(e,t){var r=F.styles[t];return r?"["+F.colors[r][0]+"m"+e+"["+F.colors[r][1]+"m":e}function H(e,t){return e}function q(t,r,n){if(t.customInspect&&r&&oe(r.inspect)&&r.inspect!==F&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return K(e)||(e=q(t,e,n)),e}var o=function(e,t){if(X(t))return e.stylize("undefined","undefined");if(K(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Z(t))return e.stylize(""+t,"number");if(J(t))return e.stylize(""+t,"boolean");if(Y(t))return e.stylize("null","null")}(t,r);if(o)return o;var i=Object.keys(r),a=function(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(r)),ne(r)&&(0<=i.indexOf("message")||0<=i.indexOf("description")))return B(r);if(0===i.length){if(oe(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(ee(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(re(r))return t.stylize(Date.prototype.toString.call(r),"date");if(ne(r))return B(r)}var c,s="",f=!1,l=["{","}"];(G(r)&&(f=!0,l=["[","]"]),oe(r))&&(s=" [Function"+(r.name?": "+r.name:"")+"]");return ee(r)&&(s=" "+RegExp.prototype.toString.call(r)),re(r)&&(s=" "+Date.prototype.toUTCString.call(r)),ne(r)&&(s=" "+B(r)),0!==i.length||f&&0!=r.length?n<0?ee(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=f?function(t,r,n,o,e){for(var i=[],a=0,u=r.length;a<u;++a)pe(r,String(a))?i.push($(t,r,n,o,String(a),!0)):i.push("");return e.forEach(function(e){e.match(/^\d+$/)||i.push($(t,r,n,o,e,!0))}),i}(t,r,n,a,i):i.map(function(e){return $(t,r,n,a,e,f)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,s,l)):l[0]+s+l[1]}function B(e){return"["+Error.prototype.toString.call(e)+"]"}function $(e,t,r,n,o,i){var a,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),pe(n,o)||(a="["+o+"]"),u||(e.seen.indexOf(c.value)<0?-1<(u=Y(r)?q(e,c.value,null):q(e,c.value,r-1)).indexOf("\n")&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),X(a)){if(i&&o.match(/^\d+$/))return u;a=(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+u}function G(e){return Array.isArray(e)}function J(e){return"boolean"==typeof e}function Y(e){return null===e}function W(e){return null==e}function Z(e){return"number"==typeof e}function K(e){return"string"==typeof e}function Q(e){return"symbol"==typeof e}function X(e){return void 0===e}function ee(e){return te(e)&&"[object RegExp]"===ue(e)}function te(e){return"object"==typeof e&&null!==e}function re(e){return te(e)&&"[object Date]"===ue(e)}function ne(e){return te(e)&&("[object Error]"===ue(e)||e instanceof Error)}function oe(e){return"function"==typeof e}function ie(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function ae(e){return Buffer.isBuffer(e)}function ue(e){return Object.prototype.toString.call(e)}function ce(e){return e<10?"0"+e.toString(10):e.toString(10)}F.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},F.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var se=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function fe(){console.log("%s - %s",function(){var e=new Date,t=[ce(e.getHours()),ce(e.getMinutes()),ce(e.getSeconds())].join(":");return[e.getDate(),se[e.getMonth()],t].join(" ")}(),C.apply(null,arguments))}function le(e,t){if(!t||!te(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var he={inherits:_,_extend:le,log:fe,isBuffer:ae,isPrimitive:ie,isFunction:oe,isError:ne,isDate:re,isObject:te,isRegExp:ee,isUndefined:X,isSymbol:Q,isString:K,isNumber:Z,isNullOrUndefined:W,isNull:Y,isBoolean:J,isArray:G,inspect:F,deprecate:z,format:C,debuglog:D},de=k(Object.freeze({format:C,deprecate:z,debuglog:D,inspect:F,isArray:G,isBoolean:J,isNull:Y,isNullOrUndefined:W,isNumber:Z,isString:K,isSymbol:Q,isUndefined:X,isRegExp:ee,isObject:te,isDate:re,isError:ne,isFunction:oe,isPrimitive:ie,isBuffer:ae,log:fe,inherits:_,_extend:le,default:he})).inherits,ye=E(function(e,s){var i=(s=e.exports=function e(){for(var t,r,n=500,o={},i=0;i<arguments.length;i++){var a=arguments[i];if(a instanceof Error)n=(t=a).status||t.statusCode||n;else switch(typeof a){case"string":r=a;break;case"number":n=a;break;case"object":o=a}}"number"==typeof n&&P[n]||(n=500);var u=s[n];for(var c in t||(t=u?new u(r):new Error(r||P[n]),Error.captureStackTrace(t,e)),u&&t instanceof u||(t.expose=n<500,t.status=t.statusCode=n),o)"status"!==c&&"statusCode"!==c&&(t[c]=o[c]);return t}).HttpError=function(){throw new TypeError("cannot construct abstract class")};de(i,Error),P.codes.filter(function(e){return 400<=e}).forEach(function(n){var e=function(e){return e.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}(P[n]),o=e.match(/Error$/)?e:e+"Error";if(500<=n){var t=function e(t){var r=new Error(null!=t?t:P[n]);return Error.captureStackTrace(r,e),r.__proto__=e.prototype,Object.defineProperty(r,"name",{enumerable:!1,configurable:!0,value:o,writable:!0}),r};return de(t,i),t.prototype.status=t.prototype.statusCode=n,t.prototype.expose=!1,void(s[n]=s[e]=t)}var r=function e(t){var r=new Error(null!=t?t:P[n]);return Error.captureStackTrace(r,e),r.__proto__=e.prototype,Object.defineProperty(r,"name",{enumerable:!1,configurable:!0,value:o,writable:!0}),r};de(r,i),r.prototype.status=r.prototype.statusCode=n,r.prototype.expose=!0,s[n]=s[e]=r}),s["I'mateapot"]=s.ImATeapot});ye.HttpError;function ve(t){try{return decodeURIComponent(t)}catch(e){throw ye(400,'failed to decode param "'+t+'"')}}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e){return"/"===e.charAt(0)}function we(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}var be="production"===process.env.NODE_ENV;function xe(e,t){if(!be){if(e)return;var r="Warning: "+t;"undefined"!=typeof console&&console.warn(r);try{throw Error(r)}catch(e){}}}var Ee="production"===process.env.NODE_ENV,ke="Invariant failed";function Oe(e,t){if(!e)throw Ee?new Error(ke):new Error(ke+": "+(t||""))}function Se(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)}function Ne(e,t,r,n){var o;"string"==typeof e?(o=function(e){var t=e||"/",r="",n="",o=t.indexOf("#");-1!==o&&(n=t.substr(o),t=t.substr(0,o));var i=t.indexOf("?");return-1!==i&&(r=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===r?"":r,hash:"#"===n?"":n}}(e)).state=t:(void 0===(o=ge({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return r&&(o.key=r),n?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=e&&e.split("/")||[],n=t&&t.split("/")||[],o=e&&me(e),i=t&&me(t),a=o||i;if(e&&me(e)?n=r:r.length&&(n.pop(),n=n.concat(r)),!n.length)return"/";var u=void 0;if(n.length){var c=n[n.length-1];u="."===c||".."===c||""===c}else u=!1;for(var s=0,f=n.length;0<=f;f--){var l=n[f];"."===l?we(n,f):".."===l?(we(n,f),s++):s&&(we(n,f),s--)}if(!a)for(;s--;s)n.unshift("..");!a||""===n[0]||n[0]&&me(n[0])||n.unshift("");var p=n.join("/");return u&&"/"!==p.substr(-1)&&(p+="/"),p}(o.pathname,n.pathname)):o.pathname=n.pathname:o.pathname||(o.pathname="/"),o}var Le=!("undefined"==typeof window||!window.document||!window.document.createElement);function je(e,t){t(window.confirm(e))}var Re="popstate",Pe="hashchange";function Te(){try{return window.history.state||{}}catch(e){return{}}}function Ae(e){void 0===e&&(e={}),Le||("production"!==process.env.NODE_ENV?Oe(!1,"Browser history needs a DOM"):Oe(!1));var u=window.history,c=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),t=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,n=r.forceRefresh,s=void 0!==n&&n,o=r.getUserConfirmation,f=void 0===o?je:o,i=r.keyLength,a=void 0===i?6:i,l=e.basename?function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}(function(e){return"/"===e.charAt(0)?e:"/"+e}(e.basename)):"";function p(e){var t=e||{},r=t.key,n=t.state,o=window.location,i=o.pathname+o.search+o.hash;return"production"!==process.env.NODE_ENV&&xe(!l||Se(i,l),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+i+'" to begin with "'+l+'".'),l&&(i=function(e,t){return Se(e,t)?e.substr(t.length):e}(i,l)),Ne(i,n,r)}function h(){return Math.random().toString(36).substr(2,a)}var d=function(){var i=null,n=[];return{setPrompt:function(e){return"production"!==process.env.NODE_ENV&&xe(null==i,"A history supports only one prompt at a time"),i=e,function(){i===e&&(i=null)}},confirmTransitionTo:function(e,t,r,n){if(null!=i){var o="function"==typeof i?i(e,t):i;"string"==typeof o?"function"==typeof r?r(o,n):("production"!==process.env.NODE_ENV&&xe(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),n(!0)):n(!1!==o)}else n(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach(function(e){return e.apply(void 0,t)})}}}();function y(e){ge(L,e),L.length=u.length,d.notifyListeners(L.location,L.action)}function v(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||w(p(e.state))}function g(){w(p(Te()))}var m=!1;function w(t){if(m)m=!1,y();else{d.confirmTransitionTo(t,"POP",f,function(e){e?y({action:"POP",location:t}):function(e){var t=L.location,r=x.indexOf(t.key);-1===r&&(r=0);var n=x.indexOf(e.key);-1===n&&(n=0);var o=r-n;o&&(m=!0,k(o))}(t)})}}var b=p(Te()),x=[b.key];function E(e){return l+function(e){var t=e.pathname,r=e.search,n=e.hash,o=t||"/";return r&&"?"!==r&&(o+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(o+="#"===n.charAt(0)?n:"#"+n),o}(e)}function k(e){u.go(e)}var O=0;function S(e){1===(O+=e)&&1===e?(window.addEventListener(Re,v),t&&window.addEventListener(Pe,g)):0===O&&(window.removeEventListener(Re,v),t&&window.removeEventListener(Pe,g))}var N=!1;var L={length:u.length,action:"POP",location:b,createHref:E,push:function(e,t){"production"!==process.env.NODE_ENV&&xe(!("object"==typeof e&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=Ne(e,t,h(),L.location);d.confirmTransitionTo(a,"PUSH",f,function(e){if(e){var t=E(a),r=a.key,n=a.state;if(c)if(u.pushState({key:r,state:n},null,t),s)window.location.href=t;else{var o=x.indexOf(L.location.key),i=x.slice(0,-1===o?0:o+1);i.push(a.key),x=i,y({action:"PUSH",location:a})}else"production"!==process.env.NODE_ENV&&xe(void 0===n,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=t}})},replace:function(e,t){"production"!==process.env.NODE_ENV&&xe(!("object"==typeof e&&void 0!==e.state&&void 0!==t),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i="REPLACE",a=Ne(e,t,h(),L.location);d.confirmTransitionTo(a,i,f,function(e){if(e){var t=E(a),r=a.key,n=a.state;if(c)if(u.replaceState({key:r,state:n},null,t),s)window.location.replace(t);else{var o=x.indexOf(L.location.key);-1!==o&&(x[o]=a.key),y({action:i,location:a})}else"production"!==process.env.NODE_ENV&&xe(void 0===n,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(t)}})},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return N||(S(1),N=!0),function(){return N&&(N=!1,S(-1)),t()}},listen:function(e){var t=d.appendListener(e);return S(1),function(){S(-1),t()}}};return L}var _e=function(t){var e=Object.keys(t).map(function(e){return[function(t){return t=t||{},function(e){var a=[],u=c(e,a,t);return function(e,t){var r,n,o=u.exec(e);if(!o)return!1;t=t||{};for(var i=0;i<a.length;i++)r=a[i],(n=o[i+1])&&(t[r.name]=ve(n),r.repeat&&(t[r.name]=t[r.name].split(r.delimiter)));return t}}}()(e),t[e]]});return function(i){return e.some(function(e){var t=u(e,2),r=t[0],n=t[1],o=r(i);return!1!==o&&(n(o),!0)})}},Ue=E(function(e){var t=function(i){var c,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function a(e,t,r,n){var o=t&&t.prototype instanceof u?t:u,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(i,a,u){var c=l;return function(e,t){if(c===h)throw new Error("Generator is already running");if(c===d){if("throw"===e)throw t;return R()}for(u.method=e,u.arg=t;;){var r=u.delegate;if(r){var n=O(r,u);if(n){if(n===y)continue;return n}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===l)throw c=d,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=h;var o=f(i,a,u);if("normal"===o.type){if(c=u.done?d:p,o.arg===y)continue;return{value:o.arg,done:u.done}}"throw"===o.type&&(c=d,u.method="throw",u.arg=o.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}i.wrap=a;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",y={};function u(){}function v(){}function g(){}var m={};m[o]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(j([])));b&&b!==e&&s.call(b,o)&&(m=b);var x=g.prototype=u.prototype=Object.create(m);function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(c){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){var i=f(c[e],c,r);if("throw"!==i.type){var a=i.arg,u=a.value;return u&&"object"==typeof u&&s.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(u).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,o)})}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function O(e,t){var r=e.iterator[t.method];if(r===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,O(e,t),"throw"===t.method))return y;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var n=f(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,y;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,y):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=c,e.done=!0,e};return n.next=n}}return{next:R}}function R(){return{value:c,done:!0}}return v.prototype=x.constructor=g,g.constructor=v,g[n]=v.displayName="GeneratorFunction",i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,n in e||(e[n]="GeneratorFunction")),e.prototype=Object.create(x),e},i.awrap=function(e){return{__await:e}},E(k.prototype),k.prototype[r]=function(){return this},i.AsyncIterator=k,i.async=function(e,t,r,n){var o=new k(a(e,t,r,n));return i.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(x),x[n]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},i.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},i.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=c),y}},i}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}),Ce=p.types.model("View",{name:p.types.identifier,path:"",component:p.types.frozen(),hooks:p.types.optional(p.types.frozen(),{})}).views(function(e){return{get root(){return p.getRoot(e)},get router(){return e.root.router}}}).actions(function(n){return{formatUrl:function(e){if(!e)return n.path;var t=n.path;for(var r in e)t=t.replace(":".concat(r),e[r]);return t},beforeEnter:p.flow(Ue.mark(function e(t){return Ue.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.hooks.beforeEnter)return e.next=3,Promise.resolve(n.hooks.beforeEnter(n,t));e.next=3;break;case 3:case"end":return e.stop()}},e)})),onEnter:p.flow(Ue.mark(function e(t){return Ue.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.hooks.onEnter)return e.next=3,Promise.resolve(n.hooks.onEnter(n,t));e.next=3;break;case 3:case"end":return e.stop()}},e)})),beforeExit:p.flow(Ue.mark(function e(t){return Ue.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.hooks.beforeExit)return e.next=3,Promise.resolve(n.hooks.beforeExit(n,t));e.next=3;break;case 3:case"end":return e.stop()}},e)})),onExit:p.flow(Ue.mark(function e(t){return Ue.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.hooks.onExit)return e.next=3,Promise.resolve(n.hooks.onExit(n,t));e.next=3;break;case 3:case"end":return e.stop()}},e)}))}}),ze=p.types.model("RouterStore",{views:p.types.map(Ce),currentView:p.types.maybe(p.types.reference(Ce)),params:p.types.frozen(),props:p.types.frozen(),isLoading:!1}).views(function(n){return{get root(){return p.getRoot(n)},get currentUrl(){return n.currentView?n.currentView.formatUrl(n.params):""},get routes(){var r={};return o.keys(n.views).forEach(function(e){var t=n.views.get(e);r[t.path]=function(e){return n.setView(t,e)}}),r}}}).actions(function(c){var t=null,s=null,f=null,l=function(e){return setTimeout(e,100)};return{setHistory:function(e){t=e},goBack:function(){t.goBack()},goForward:function(){t.goForward()},setLoading:function(e){c.isLoading=e},setView:p.flow(Ue.mark(function e(t,r){var n,o,i,a,u;return Ue.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={key:t.formatUrl(r),view:t,params:r},!s){e.next=12;break}if(s.key===n.key||f&&f.key===n.key)return e.abrupt("return");e.next=4;break;case 4:f=n;case 5:if(f)return e.next=8,new Promise(l);e.next=10;break;case 8:e.next=5;break;case 10:if(s.key!==n.key)return e.abrupt("return");e.next=12;break;case 12:if(s=n,o=p.getSnapshot(c.root),i=function(){p.applySnapshot(c.root,o),f?(s=f,c.currentView=s.view,c.params=s.params,f=null):c.isLoading=!1},a=c.currentView,u=c.params,a&&a.beforeExit)return e.next=20,a.beforeExit(u);e.next=23;break;case 20:if(e.t0=e.sent,!1===e.t0)return e.abrupt("return",i());e.next=23;break;case 23:if(f)return e.abrupt("return",i());e.next=25;break;case 25:if(c.setLoading(!0),c.currentView=t,c.params=r||{},t.beforeEnter)return e.next=31,t.beforeEnter(r);e.next=34;break;case 31:if(e.t1=e.sent,!1===e.t1)return e.abrupt("return",i());e.next=34;break;case 34:if(f)return e.abrupt("return",i());e.next=36;break;case 36:if(a&&a.onExit)return e.next=39,c.currentView.onExit(u);e.next=39;break;case 39:if(f)return e.abrupt("return");e.next=41;break;case 41:if(c.props=c.props||{},c.setLoading(!1),t.onEnter)return e.next=46,t.onEnter(r);e.next=46;break;case 46:if(f)return e.abrupt("return");e.next=48;break;case 48:s=null;case 49:case"end":return e.stop()}},e)})),setProps:function(e){c.props=e}}}),Ve=t.observer(function(e){var t=e.router,r=e.view,n=e.params,o=e.children,i=e.className;return a.createElement("a",{href:r.formatUrl(n),onClick:function(e){e.preventDefault(),t.setView(r,n)},className:i},a.createElement("div",null,o))}),Ie=t.observer(function(e){var t=e.router,r=e.loading;return t.isLoading?r||a.createElement("span",null,"loading"):a.createElement("div",null,t.currentView&&t.currentView.component?a.cloneElement(t.currentView.component,t.props):"currentView not loaded yet or component is missing")});e.Link=Ve,e.RouterStore=ze,e.StateRouter=Ie,e.View=Ce,e.startRouter=function(e){var t=Ae();e.setHistory(t);var r=_e(e.routes);t.listen(function(e,t){switch(t){case"POP":r(e.pathname)}}),o.reaction(function(){return e.currentUrl},function(e){t.location.pathname!==e&&t.push(e)}),r(t.location.pathname)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mobx-state-tree-router.min.js.map
